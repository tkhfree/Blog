---

title: Vscode编辑C项目
date: 2022-11-27 13:17
tags:
  -  c/c++

categories:
  - 方法：方法论（经验谈）

comments: true
toc: true

---
vscode是一个文本编辑器，附带的各种各样的插件很丰富。提前使用MinGW安装好GNU的环境，主要是c和c++编译器，使用vscode进行c语言的编辑，最终组成一个很方便的ide。

> 最终效果：实时显示编译阶段的错误、代码片段、补全、格式化、单文件的编译与调试。

- 安装c/c++、Runner这两个插件，目的是调用MinGW的编译器。
    
- 创建文件夹，在.vscode里创建laungh.json、tasks.json两个文件。laungh.json用于调试；tasks.json用于编译。如果不需要调试可以只创建tasks.json。这两个文件就是为了替代在命令行输入gcc -o xxx xxx.c等这些指令。
    
- 因此创建launch.json文件可以在左侧第四个点击Run，选择C++ （GDB/LLDB）这个选项
    
    > 里面主要修改
    > 
    > "program": "${workspaceFolder}/${fileDirname}/${fileBasenameNoExtension}.exe",
    > 
    > 运行的程序是当前工作空间下当前文件目录的exe文件
    > 
    > "miDebuggerPath": "c:/MinGW/bin/gdb.exe"
    > 
    > 运行的调试gdb的目录
    
- 创建tasks.json文件可以使用 terminal->configuration task里寻找模版，如果没有手动设置
    
    > 里面主要设置
    > 
    > "type": "shell",
    > 
    > 使用shell程序
    > 
    > "command": "c:/windows/mingw/bin/gcc",
    > 
    > gcc所在的目录
    > 
    > "args": \[
    > 
    > "-g",
    > 
    >  "${file}",
    > 
    >  "-o",
    > 
    >  "${fileDirname}/${fileBasenameNoExtension}"
    > 
    >  \],
    > 
    > 命令行的参数
    
有一个自动部署调试c++的工具**vscch**，很好用

> 关于c的一些tips：
> 
> 函数指针：本质上还是一个指针，只不过指向函数的入口地址。函数指针有两个用途：调用函数和做函数的[参数](https://baike.baidu.com/item/%E5%8F%82%E6%95%B0/5934974)。
> 
> 返回值类型 ( \* [指针变量](https://baike.baidu.com/item/%E6%8C%87%E9%92%88%E5%8F%98%E9%87%8F)名) (\[[形参](https://baike.baidu.com/item/%E5%BD%A2%E5%8F%82)列表\]);
> 
> ( \* [指针变量](https://baike.baidu.com/item/%E6%8C%87%E9%92%88%E5%8F%98%E9%87%8F)名)一定要有括号，不然就变成返回一个指针的函数类型了。
> 
> int * func(int a ); //函数
> 
> Int (* f)(int a ); //函数指针
> 
> f = func; 函数指针指向func的入口地址。

先创建task.json，告诉vscode怎么build（compiler）程序，这将创建可执行程序。

创建launch.json，是启动调试器gdb调试。

步骤是先写好c文件，在c文件置于活动页面下，创建task.json，再创建launch.json，这样默认的配置都补全了。

如果需要改标准库路径和版本等信息的话创建.vscode\c_cpp_properties.json

You only need to add to the **Include path** array setting if your program includes header files that are not in your workspace or in the standard library path./如果导入的库既不在你的workspace里也不在标准库里，则需要在include path里加入这个路径。

遇到的问题
1、include path用上文提到的vscch工具生成的路径是{{workspaceFoldr}}，不生效，需要改成{}
2、如果使用工具配置的时候选的是c++，就不能定义文件名后缀为.c

---
${workspaceFolder} :表示当前workspace文件夹路径，也即C:\Users\admin\Desktop\test

${workspaceRootFolderName}:表示workspace的文件夹名，也即test

${file}:文件自身的绝对路径，也即C:\Users\admin\Desktop\test\.vscode\launch.json

${relativeFile}:文件在workspace中的路径，也即.vscode\launch.json

${fileBasenameNoExtension}:当前文件的文件名，不带后缀，也即launch

${fileBasename}:当前文件的文件名，launch.json

${fileDirname}:文件所在的文件夹路径，也即C:\Users\admin\Desktop\test\.vscode

${fileExtname}:当前文件的后缀，也即.json

${lineNumber}:当前文件光标所在的行号

${env:PATH}:系统中的环境变量